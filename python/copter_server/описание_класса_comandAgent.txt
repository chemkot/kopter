class comandAgent:
	runCmd(cmd)
	isReady()
	hasData()
	fetchData()
	stop()
	setReady()
	addAnswer(answer)
	getCmd()


если isReady() и !hasData() -> свободны, можно запустить команду
если isReady() и hasData()  -> закончили выполнять команду, нужно выгрузить ответы

если !isReady() -> выполняет команду, можно проверять наличие данных

держим клиента и принимаем данные, проверяем на стоп, проверяем наличие ответов для клиента и поо мере готовности отсылаем пока !isReady(). 
Как только готов - запускаем новую порцию данных